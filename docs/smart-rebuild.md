# Smart Rebuild

> "AIë¡œ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ë ˆê±°ì‹œë¥¼ ìƒˆë¡œ êµ¬ì¶•"
>
> **"Rebuild, not Migrate"** â€” ì½”ë“œë¥¼ ë³€í™˜í•˜ì§€ ì•Šê³ , ìƒˆë¡œ ë§Œë“ ë‹¤.

## 1. ê°œìš”

### 1.1 ì»¨ì…‰

Smart RebuildëŠ” ê¸°ì¡´ ë ˆê±°ì‹œ ì‚¬ì´íŠ¸(ì›¹ë¹Œë”, PHP ë“±)ë¥¼ í˜„ëŒ€ì ì¸ ê¸°ìˆ  ìŠ¤íƒ(Next.js, Java Spring Boot ë“±)ìœ¼ë¡œ **ìƒˆë¡œ êµ¬ì¶•**í•˜ëŠ” AI ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°ì…ë‹ˆë‹¤.

```
ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜: ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„ â†’ ì½”ë“œ ë³€í™˜ (ë ˆê±°ì‹œ íŒ¨í„´ ìœ ì§€)
Smart Rebuild:    ìŠ¤í¬ë¦°ìƒ· + ì†ŒìŠ¤ â†’ AIê°€ ìƒˆë¡œ ìƒì„± (í´ë¦° ì½”ë“œ)
```

### 1.2 í•µì‹¬ ì² í•™

| ê³„ì¸µ | ì „ëµ | ì´ìœ  |
|------|------|------|
| **UI** | ìƒˆë¡œ ë§Œë“¦ | ë ˆê±°ì‹œ í”„ë¡ íŠ¸ ì½”ë“œ ë¶„ì„ ê°€ì¹˜ ë‚®ìŒ |
| **API** | ìƒˆë¡œ ë§Œë“¦ | ì†ŒìŠ¤ ì°¸ê³ í•˜ì—¬ í´ë¦° ì•„í‚¤í…ì²˜ë¡œ |
| **DB** | ìœ ì§€ + ì ì§„ì  ê°œì„  | ë°ì´í„° ì†ì‹¤ ìœ„í—˜ Zero |

### 1.3 ì ìš© ëŒ€ìƒ

- ì›¹ë¹Œë”ë¡œ ë§Œë“  ì‚¬ì´íŠ¸ (Wix, Squarespace, WordPress ë“±)
- ë ˆê±°ì‹œ PHP ì‚¬ì´íŠ¸
- jQuery ê¸°ë°˜ ì‚¬ì´íŠ¸
- ê¸°íƒ€ ë ˆê±°ì‹œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

---

## 2. 2-Track ì „ëµ

í˜ì´ì§€ë¥¼ **ì •ì /ë™ì **ìœ¼ë¡œ ìë™ ë¶„ë¥˜í•˜ì—¬ ê°ê° ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### 2.1 Track 1: ì •ì  ì½˜í…ì¸ 

```
ë¼ì´ë¸Œ ì‚¬ì´íŠ¸ â†’ Playwright ìŠ¤í¬ë˜í•‘ â†’ Next.js ì •ì  í˜ì´ì§€

ì í•©í•œ í˜ì´ì§€: ì†Œê°œ, About, FAQ, ì´ìš©ì•½ê´€, ê³µì§€ì‚¬í•­
íŠ¹ì§•: DB í•„ìš” ì—†ìŒ, ì½˜í…ì¸ ë§Œ ì˜®ê¸°ë©´ ë¨
```

### 2.2 Track 2: ë™ì  ì½˜í…ì¸ 

```
ì†ŒìŠ¤ ë¶„ì„ â†’ SQL ì¶”ì¶œ â†’ Backend API â†’ Next.js í˜ì´ì§€

ì í•©í•œ í˜ì´ì§€: íšŒì› ëª©ë¡, ê²°ì œ ë‚´ì—­, ê²Œì‹œíŒ, ê´€ë¦¬ì
íŠ¹ì§•: DB ì—°ë™ í•„ìˆ˜, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆìŒ
```

### 2.3 ìë™ ë¶„ë¥˜ ê¸°ì¤€

**ë™ì  í˜ì´ì§€ íŒë‹¨ ê¸°ì¤€:**
- SQL ì¿¼ë¦¬ ì¡´ì¬ (SELECT, INSERT, UPDATE, DELETE)
- DB ì—°ê²° í•¨ìˆ˜ (mysqli_*, PDO, $wpdb)
- ì„¸ì…˜ ì²´í¬ ($_SESSION, session_start)
- POST ì²˜ë¦¬ ($_POST, $_REQUEST)
- ë™ì  íŒŒë¼ë¯¸í„° ($_GET['id'])

**ì •ì  í˜ì´ì§€ íŒë‹¨ ê¸°ì¤€:**
- ìœ„ í•­ëª© ëª¨ë‘ ì—†ìŒ
- ìˆœìˆ˜ HTML + ì•½ê°„ì˜ PHP (include, requireë§Œ)

---

## 3. ì „ì²´ ì›Œí¬í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: Capture (ë§í¬ ìˆ˜ì§‘) - Lazy Capture ë°©ì‹                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Playwrightë¡œ ì‚¬ì´íŠ¸ í¬ë¡¤ë§                                                  â”‚
â”‚  â”œâ”€â”€ ğŸ”´ ë§í¬ë§Œ ìˆ˜ì§‘ (HTML/ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ ì•ˆ í•¨!)                              â”‚
â”‚  â”œâ”€â”€ sitemap.json ìƒì„± (captured: false)                                    â”‚
â”‚  â””â”€â”€ --prefetch ì˜µì…˜ ì‹œì—ë§Œ ì „ì²´ ìº¡ì²˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2: Analyze (ë¶„ì„ & ë§¤í•‘)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë ˆê±°ì‹œ ì†ŒìŠ¤ ë¶„ì„                                                            â”‚
â”‚  â”œâ”€â”€ URL â†” ì†ŒìŠ¤ íŒŒì¼ ë§¤ì¹­                                                   â”‚
â”‚  â”œâ”€â”€ ì •ì /ë™ì  ìë™ ë¶„ë¥˜                                                     â”‚
â”‚  â”œâ”€â”€ SQL ì¿¼ë¦¬ ì¶”ì¶œ (ë™ì ì¸ ê²½ìš°)                                             â”‚
â”‚  â”œâ”€â”€ ğŸ”´ API ì˜ì¡´ì„± ì¶”ì¶œ â†’ api-mapping.json ìƒì„±                              â”‚
â”‚  â””â”€â”€ mapping.json ìƒì„±                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3: Generate Frontend (í˜ì´ì§€ë³„ ì²˜ë¦¬)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase A: í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (ì²« í˜ì´ì§€ë§Œ)                                       â”‚
â”‚  Phase B: í˜ì´ì§€ ê¸°ë³¸ ì½”ë“œ ìƒì„±                                               â”‚
â”‚    â”œâ”€â”€ Step 0: ğŸ”´ Lazy Capture ì²´í¬ (captured=falseë©´ ìº¡ì²˜)                  â”‚
â”‚    â”œâ”€â”€ Step 1: sitemap.json ì½ê¸°                                             â”‚
â”‚    â”œâ”€â”€ Step 2: ìŠ¤í¬ë¦°ìƒ· ì½ê¸° (ì‹œê° ë¶„ì„)                                     â”‚
â”‚    â”œâ”€â”€ Step 3: HTML ì½ê¸° (í…ìŠ¤íŠ¸/ì´ë¯¸ì§€ ì¶”ì¶œ)                                â”‚
â”‚    â”œâ”€â”€ Step 3.5: ğŸ”´ ì›ë³¸ CSS Fetch (ì²« í˜ì´ì§€ë§Œ)                             â”‚
â”‚    â”œâ”€â”€ Step 4: ğŸ”´ ì„¹ì…˜ë³„ ì»´í¬ë„ŒíŠ¸ ìƒì„± (data-section-id í¬í•¨!)               â”‚
â”‚    â””â”€â”€ Step 5: page.tsx ìƒì„± (ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ì¡°í•©)                            â”‚
â”‚  Phase C: ê°œë°œ ì„œë²„ ì‹¤í–‰                                                      â”‚
â”‚  Phase D: AskUserQuestion (ë‹¤ìŒ ì‘ì—… ì„ íƒ)                                    â”‚
â”‚    â”œâ”€â”€ HITL ì„¸ë¶€ ì¡°ì • â†’ Phase E                                              â”‚
â”‚    â”œâ”€â”€ ğŸ”´ ë°±ì—”ë“œ ì—°ë™ â†’ Phase G (ë™ì  í˜ì´ì§€ë§Œ)                              â”‚
â”‚    â”œâ”€â”€ ë‹¤ìŒ í˜ì´ì§€ â†’ Phase B                                                 â”‚
â”‚    â””â”€â”€ ì§ì ‘ ì…ë ¥                                                              â”‚
â”‚  Phase E: HITL ë£¨í”„ (ì„¹ì…˜ë³„ ë¹„êµ & ìˆ˜ì •)                                      â”‚
â”‚  Phase F: í˜ì´ì§€ ì™„ë£Œ                                                         â”‚
â”‚  ğŸ”´ Phase G: ë°±ì—”ë“œ ì—°ë™ (í˜ì´ì§€ë³„ ì ì§„ì  ì—°ë™)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Phase 1: Capture (ë§í¬ ìˆ˜ì§‘)

### 4.1 Lazy Capture ë°©ì‹

**ê¸°ë³¸ ë™ì‘:** ë§í¬ë§Œ ìˆ˜ì§‘í•˜ê³ , HTML + ìŠ¤í¬ë¦°ìƒ·ì€ `generate --page N` ë‹¨ê³„ì—ì„œ ìº¡ì²˜í•©ë‹ˆë‹¤.

| ì˜µì…˜ | ë™ì‘ |
|------|------|
| (ê¸°ë³¸) | ë§í¬ë§Œ ìˆ˜ì§‘ â†’ `captured: false` |
| `--prefetch` | ëª¨ë“  í˜ì´ì§€ HTML + ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ â†’ `captured: true` |

**ì¥ì :**
- ë¶ˆí•„ìš”í•œ ìº¡ì²˜ ì‹œê°„ ì ˆì•½
- í˜ì´ì§€ë³„ ì ì§„ì  ì²˜ë¦¬ ê°€ëŠ¥
- ì‹¤ì œ í•„ìš”í•œ í˜ì´ì§€ë§Œ ìº¡ì²˜

### 4.2 ìº¡ì²˜ ì˜µì…˜

| ì˜µì…˜ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|--------|
| `--merge` | ê¸°ì¡´ sitemap.jsonì— ìƒˆ routeë§Œ ì¶”ê°€ | âœ… (ê¸°ë³¸) |
| `--force` | sitemap ìƒˆë¡œ ìƒì„± (ê¸°ì¡´ ë®ì–´ì“°ê¸°) | - |
| `--prefetch` | ëª¨ë“  í˜ì´ì§€ HTML + ìŠ¤í¬ë¦°ìƒ· ë¯¸ë¦¬ ìº¡ì²˜ | - |
| `--clean` | ë” ì´ìƒ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” route ì œê±° | - |
| `--max-pages` | ìµœëŒ€ ìº¡ì²˜ í˜ì´ì§€ ìˆ˜ | `100` |
| `--login` | ë¡œê·¸ì¸ í•„ìš” ì‹œ (ë¸Œë¼ìš°ì € ì—´ë¦¼) | - |

### 4.3 sitemap.json êµ¬ì¡°

```json
{
  "baseUrl": "https://example.com",
  "createdAt": "2026-02-05T10:00:00Z",
  "updatedAt": "2026-02-06T14:30:00Z",
  "totalPages": 15,
  "summary": {
    "pending": 13,
    "in_progress": 1,
    "completed": 1,
    "captured": 2
  },
  "pages": [
    {
      "id": 1,
      "url": "https://example.com/",
      "title": "í™ˆí˜ì´ì§€",
      "captured": true,
      "screenshot": "page_1_home.png",
      "html": "page_1_home.html",
      "status": "completed",
      "type": "static",
      "hasApi": false,
      "capturedAt": "2026-02-06T10:00:00Z"
    },
    {
      "id": 2,
      "url": "https://example.com/products",
      "title": "ìƒí’ˆ ëª©ë¡",
      "captured": false,
      "screenshot": null,
      "html": null,
      "status": "pending",
      "type": "dynamic",
      "hasApi": true,
      "apis": ["/api/products"],
      "capturedAt": null
    }
  ]
}
```

---

## 5. Phase 2: Analyze (ë¶„ì„ & ë§¤í•‘)

### 5.1 API ì˜ì¡´ì„± ì¶”ì¶œ

ë ˆê±°ì‹œ ì†ŒìŠ¤ì—ì„œ í˜ì´ì§€ë³„ í•„ìš”í•œ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ì‹ë³„í•©ë‹ˆë‹¤.

```javascript
// PHP íŒŒì¼ì—ì„œ SQL ì¿¼ë¦¬ ì¶”ì¶œ
const sqlPatterns = [
  { pattern: /SELECT\s+.+\s+FROM\s+(\w+)/gi, method: 'GET' },
  { pattern: /INSERT\s+INTO\s+(\w+)/gi, method: 'POST' },
  { pattern: /UPDATE\s+(\w+)\s+SET/gi, method: 'PUT' },
  { pattern: /DELETE\s+FROM\s+(\w+)/gi, method: 'DELETE' },
];

// í…Œì´ë¸”ëª… â†’ API ì—”ë“œí¬ì¸íŠ¸ ë³€í™˜
// members â†’ /api/members
// product_list â†’ /api/products
```

### 5.2 api-mapping.json êµ¬ì¡°

```json
{
  "version": "1.0",
  "createdAt": "2026-02-06T10:00:00Z",
  "sourceFramework": "php-pure",
  "targetBackend": "java",

  "commonApis": [
    {
      "path": "/api/auth/login",
      "method": "POST",
      "required": true,
      "sourceFile": "login.php",
      "generated": false,
      "connected": false
    },
    {
      "path": "/api/users/me",
      "method": "GET",
      "required": true,
      "sourceFile": "session.php",
      "generated": false,
      "connected": false
    }
  ],

  "pageApis": {
    "1": [],
    "3": [
      {
        "path": "/api/products",
        "method": "GET",
        "sourceFile": "product_list.php",
        "table": "products",
        "params": ["category", "page", "limit"],
        "generated": false,
        "connected": false
      }
    ]
  },

  "entities": [
    {
      "name": "Product",
      "table": "products",
      "fields": [
        { "name": "id", "type": "BIGINT", "javaType": "Long" },
        { "name": "name", "type": "VARCHAR(255)", "javaType": "String" },
        { "name": "price", "type": "DECIMAL(10,2)", "javaType": "BigDecimal" }
      ]
    }
  ]
}
```

**í•„ë“œ ì„¤ëª…:**

| í•„ë“œ | ì„¤ëª… |
|------|------|
| `commonApis` | ëª¨ë“  í˜ì´ì§€ì—ì„œ ê³µí†µìœ¼ë¡œ í•„ìš”í•œ API (ì¸ì¦ ë“±) |
| `commonApis[].required` | trueë©´ ì²« ë™ì  í˜ì´ì§€ ì—°ë™ ì‹œ ë°˜ë“œì‹œ ìƒì„± |
| `pageApis` | í˜ì´ì§€ IDë³„ í•„ìš”í•œ API ëª©ë¡ |
| `*.generated` | API ìƒì„± ì™„ë£Œ ì—¬ë¶€ |
| `*.connected` | í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ì™„ë£Œ ì—¬ë¶€ |

---

## 6. Phase 3: Generate Frontend

### 6.1 HARD RULES (ì ˆëŒ€ ìœ„ë°˜ ê¸ˆì§€!)

| # | ê·œì¹™ | ì„¤ëª… |
|---|------|------|
| 1 | **ìŠ¤í¬ë¦°ìƒ· í•„ìˆ˜ ë¶„ì„** | ì½”ë“œ ì‘ì„± ì „ ë°˜ë“œì‹œ ìŠ¤í¬ë¦°ìƒ·ì„ Readí•˜ê³  ì‹œê°ì ìœ¼ë¡œ ë¶„ì„ |
| 2 | **HTML êµ¬ì¡° ë³µì‚¬** | `<header>`, `<nav>`, `<main>`, `<footer>` êµ¬ì¡° ê·¸ëŒ€ë¡œ ìœ ì§€ |
| 3 | **ì›ë³¸ í…ìŠ¤íŠ¸ ìœ ì§€** | HTMLì—ì„œ ì¶”ì¶œí•œ í…ìŠ¤íŠ¸ë¥¼ ë²ˆì—­ ì—†ì´ ì›ë³¸ ê·¸ëŒ€ë¡œ ì‚¬ìš© |
| 4 | **ì›ë³¸ ì´ë¯¸ì§€ URL** | HTMLì˜ `<img src="...">` URLì„ ê·¸ëŒ€ë¡œ ì‚¬ìš© |
| 5 | **ì›ë³¸ CSS Fetch** | ì›ë³¸ ì‚¬ì´íŠ¸ì˜ CSSë¥¼ WebFetchë¡œ ê°€ì ¸ì™€ `src/styles/`ì— ì €ì¥ |
| 6 | **ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬** | ì„¹ì…˜ë³„ë¡œ `components/{route}/*-section.tsx` íŒŒì¼ ìƒì„± |
| 7 | **ì„¹ì…˜ ì‹ë³„ì í•„ìˆ˜** | ëª¨ë“  ì£¼ìš” ì„¹ì…˜ì— `data-section-id` ì†ì„± ì¶”ê°€ (HITL ë¹„êµìš©) |
| 8 | **ìŠ¤í¬ë¦°ìƒ· ê¸°ë°˜ ìŠ¤íƒ€ì¼** | ìƒ‰ìƒ, í°íŠ¸ í¬ê¸°, ê°„ê²©ì€ ìŠ¤í¬ë¦°ìƒ·ì—ì„œ ì¶”ì¶œ |
| 9 | **kebab-case ë„¤ì´ë°** | í´ë”/íŒŒì¼ëª…ì€ ë°˜ë“œì‹œ kebab-case (`about-us/`, `hero-section.tsx`) |

### 6.2 íŒŒì¼/í´ë” ë„¤ì´ë° ê·œì¹™

| ëŒ€ìƒ | ê·œì¹™ | âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ | âŒ ì˜ëª»ëœ ì˜ˆì‹œ |
|------|------|---------------|---------------|
| **ë¼ìš°íŠ¸ í´ë”** | kebab-case | `about-us/`, `contact-form/` | `aboutUs/`, `ContactForm/` |
| **í˜ì´ì§€ íŒŒì¼** | page.tsx (ê³ ì •) | `about-us/page.tsx` | `AboutUs.tsx` |
| **ì»´í¬ë„ŒíŠ¸ íŒŒì¼** | kebab-case | `header-nav.tsx`, `hero-section.tsx` | `HeaderNav.tsx` |

### 6.3 ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬

**ëª¨ë“  ì„¹ì…˜ì€ ë³„ë„ ì»´í¬ë„ŒíŠ¸ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ê³ , page.tsxì—ì„œ ì¡°í•©í•©ë‹ˆë‹¤.**

```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ about-us/
â”‚       â””â”€â”€ page.tsx              # ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ì¡°í•©
â”‚
â””â”€â”€ components/
    â””â”€â”€ about-us/                 # í˜ì´ì§€ë³„ ì»´í¬ë„ŒíŠ¸ í´ë” (kebab-case!)
        â”œâ”€â”€ hero-section.tsx      # data-section-id="01-hero"
        â”œâ”€â”€ team-section.tsx      # data-section-id="02-team"
        â””â”€â”€ contact-section.tsx   # data-section-id="03-contact"
```

**ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ:**
```tsx
// components/about-us/hero-section.tsx
export function HeroSection() {
  return (
    <section data-section-id="01-hero" className="...">
      {/* ğŸ”´ ì›ë³¸ HTML í…ìŠ¤íŠ¸ ê·¸ëŒ€ë¡œ! */}
      <h1>About Our Company</h1>
      <p>We are a leading provider of...</p>
      <img src="https://example.com/images/hero.jpg" alt="Hero" />
    </section>
  );
}
```

**page.tsx í…œí”Œë¦¿:**
```tsx
// app/about-us/page.tsx
import { HeroSection } from '@/components/about-us/hero-section';
import { TeamSection } from '@/components/about-us/team-section';
import { ContactSection } from '@/components/about-us/contact-section';

export default function AboutUsPage() {
  return (
    <div>
      <HeroSection />
      <TeamSection />
      <ContactSection />
    </div>
  );
}
```

### 6.4 ì›ë³¸ CSS Fetch

**ì²« í˜ì´ì§€ ìƒì„± ì‹œ ì›ë³¸ CSSë¥¼ ê°€ì ¸ì™€ì„œ ì €ì¥í•©ë‹ˆë‹¤.**

```
src/styles/
â”œâ”€â”€ legacy/              # ì›ë³¸ ì‚¬ì´íŠ¸ì—ì„œ ê°€ì ¸ì˜¨ CSS
â”‚   â”œâ”€â”€ main.css
â”‚   â””â”€â”€ style.css
â””â”€â”€ legacy-imports.css   # ë ˆê±°ì‹œ CSS í†µí•© import
```

**layout.tsxì—ì„œ import:**
```tsx
// src/app/layout.tsx
import '@/styles/legacy-imports.css';  // ğŸ”´ ë ˆê±°ì‹œ CSS
import './globals.css';                 // Tailwind
```

---

## 7. Phase E: HITL ë£¨í”„ (Human-In-The-Loop)

### 7.1 ì›Œí¬í”Œë¡œìš°

```
E-1. hitl-refine.ts ì‹¤í–‰ (Bash)
     â†’ ì›ë³¸ ì‚¬ì´íŠ¸ ìº¡ì²˜ + ë¡œì»¬ ì‚¬ì´íŠ¸ ìº¡ì²˜ + DOM ë¹„êµ
         â†“
E-2. JSON ê²°ê³¼ íŒŒì‹±
     â†’ overallMatch%, issues[], suggestions[] ì¶”ì¶œ
         â†“
E-3. AskUserQuestion
     "{ì„¹ì…˜} ì¼ì¹˜ìœ¨ {N}%. ì–´ë–»ê²Œ ì²˜ë¦¬í• ê¹Œìš”?"
     options: [ìŠ¹ì¸, ìˆ˜ì • í•„ìš”, ìŠ¤í‚µ]
         â†“
E-4. ì‘ë‹µë³„ ì²˜ë¦¬
     ìŠ¹ì¸ â†’ E-5
     ìˆ˜ì • í•„ìš” â†’ ì½”ë“œ Edit â†’ E-1ë¡œ ëŒì•„ê°€ê¸° (ì¬ìº¡ì²˜!)
     ìŠ¤í‚µ â†’ E-5
         â†“
E-5. ë‹¤ìŒ ì„¹ì…˜ ì²´í¬
     ë‚¨ì€ ì„¹ì…˜ ìˆìŒ â†’ E-1ë¡œ ëŒì•„ê°€ê¸°
     ëª¨ë“  ì„¹ì…˜ ì™„ë£Œ â†’ Phase F
```

### 7.2 data-section-id ê·œì¹™

**HITL ë¹„êµë¥¼ ìœ„í•´ ëª¨ë“  ì„¹ì…˜ì— `data-section-id` ì†ì„± í•„ìˆ˜!**

```
{ìˆœë²ˆ}-{ì„¹ì…˜ëª…}
ì˜ˆ: 01-header, 02-nav, 03-hero, 04-features, 05-footer
```

| ì›ë³¸ HTML | ë¡œì»¬ React |
|-----------|------------|
| `<header id="main-header">` | `<header data-section-id="01-header">` |
| `<section class="hero">` | `<section data-section-id="02-hero">` |
| `<footer>` | `<footer data-section-id="05-footer">` |

---

## 8. Phase G: ë°±ì—”ë“œ ì—°ë™ (í˜ì´ì§€ë³„ ì ì§„ì  ì—°ë™)

### 8.1 ê°œìš”

**ê¸°ì¡´ ë°©ì‹ ë¬¸ì œì :**
```
ëª¨ë“  FE ì™„ë£Œ â†’ BE ì¼ê´„ ìƒì„± â†’ ì¼ê´„ ì—°ë™
â†’ í”¼ë“œë°± ë£¨í”„ê°€ ë„ˆë¬´ ê¹€, ë¬¸ì œ ë°œê²¬ì´ ëŠ¦ìŒ
```

**ìƒˆë¡œìš´ ë°©ì‹:**
```
1í˜ì´ì§€ FE ì™„ë£Œ â†’ í•´ë‹¹ í˜ì´ì§€ API ìƒì„± â†’ ì—°ë™ â†’ ì¦‰ì‹œ í™•ì¸
â†’ ë¹ ë¥¸ í”¼ë“œë°±, ì¡°ê¸° ë¬¸ì œ ë°œê²¬
```

### 8.2 Phase G ì›Œí¬í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase G: ë°±ì—”ë“œ ì—°ë™ (í˜ì´ì§€ë³„ ì ì§„ì  ì—°ë™)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  G-1. ê³µí†µ API ì²´í¬                                              â”‚
â”‚       IF api-mapping.jsonì˜ commonApis ì¤‘ ë¯¸ìƒì„± API ìˆìŒ:       â”‚
â”‚         â†’ ê³µí†µ API ë¨¼ì € ìƒì„± (ì¸ì¦, ì‚¬ìš©ì ì •ë³´ ë“±)               â”‚
â”‚                                                                  â”‚
â”‚  G-2. í˜ì´ì§€ ì „ìš© API ìƒì„±                                       â”‚
â”‚       - api-mapping.jsonì—ì„œ pageApis[{pageId}] ì¶”ì¶œ            â”‚
â”‚       - Spring Boot: Controller + Service + Repository ìƒì„±     â”‚
â”‚       - Entity í´ë˜ìŠ¤ ìƒì„± (entities[] ì°¸ì¡°)                     â”‚
â”‚                                                                  â”‚
â”‚  G-3. Frontend Connect                                           â”‚
â”‚       - Mock ë°ì´í„° â†’ fetch API í˜¸ì¶œë¡œ êµì²´                      â”‚
â”‚       - .env.localì— NEXT_PUBLIC_API_URL ì„¤ì •                   â”‚
â”‚                                                                  â”‚
â”‚  G-4. í†µí•© í…ŒìŠ¤íŠ¸                                                â”‚
â”‚       - BE ì„œë²„ ì‹¤í–‰: ./gradlew bootRun                          â”‚
â”‚       - FE ì„œë²„ ì‹¤í–‰: npm run dev                                â”‚
â”‚       - ì‹¤ì œ ë™ì‘ í™•ì¸                                           â”‚
â”‚                                                                  â”‚
â”‚  G-5. AskUserQuestion                                            â”‚
â”‚       "ì—°ë™ ì™„ë£Œ! ë‹¤ìŒ ì‘ì—…ì€?"                                  â”‚
â”‚       options: [HITL ì¬ì¡°ì •, ë‹¤ìŒ í˜ì´ì§€, ì§ì ‘ ì…ë ¥]              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 generate backend ì˜µì…˜

| Option | Description | Default |
|--------|-------------|---------|
| `--api-mapping` | API ë§¤í•‘ íŒŒì¼ | `./api-mapping.json` |
| `--page <id>` | íŠ¹ì • í˜ì´ì§€ APIë§Œ ìƒì„± | (ì „ì²´) |
| `--common-only` | ê³µí†µ APIë§Œ ìƒì„± (ì¸ì¦ ë“±) | - |
| `--skip-common` | ê³µí†µ API ìŠ¤í‚µ (ì´ë¯¸ ìƒì„±ëœ ê²½ìš°) | - |

```bash
# ê³µí†µ API ë¨¼ì € ìƒì„±
/jikime:smart-rebuild generate backend --common-only

# íŠ¹ì • í˜ì´ì§€ APIë§Œ ìƒì„±
/jikime:smart-rebuild generate backend --page 3 --skip-common
```

### 8.4 generate connect ì˜µì…˜

| Option | Description | Default |
|--------|-------------|---------|
| `--frontend-dir` | í”„ë¡ íŠ¸ì—”ë“œ ë””ë ‰í† ë¦¬ | `./output/frontend` |
| `--page <id>` | íŠ¹ì • í˜ì´ì§€ë§Œ ì—°ë™ | (ì „ì²´) |
| `--api-url` | ë°±ì—”ë“œ API URL | `http://localhost:8080` |

---

## 9. ì¶œë ¥ êµ¬ì¡°

```
{output}/
â”œâ”€â”€ capture/
â”‚   â”œâ”€â”€ sitemap.json          # ìº¡ì²˜ ì¸ë±ìŠ¤ + captured ìƒíƒœ
â”‚   â”œâ”€â”€ *.png                 # ìŠ¤í¬ë¦°ìƒ· (ìº¡ì²˜ëœ í˜ì´ì§€ë§Œ)
â”‚   â”œâ”€â”€ *.html                # HTML (ìº¡ì²˜ëœ í˜ì´ì§€ë§Œ)
â”‚   â””â”€â”€ hitl/                 # HITL ë¹„êµ ê²°ê³¼
â”‚
â”œâ”€â”€ mapping.json              # ì†ŒìŠ¤ â†” ìº¡ì²˜ ë§¤í•‘
â”œâ”€â”€ api-mapping.json          # ğŸ”´ API ì˜ì¡´ì„± ë§¤í•‘
â”‚
â”œâ”€â”€ backend/                  # Spring Boot í”„ë¡œì íŠ¸
â”‚   â””â”€â”€ src/main/java/com/example/api/
â”‚       â”œâ”€â”€ controller/
â”‚       â”‚   â”œâ”€â”€ AuthController.java
â”‚       â”‚   â””â”€â”€ ProductController.java
â”‚       â”œâ”€â”€ service/
â”‚       â”œâ”€â”€ repository/
â”‚       â””â”€â”€ entity/
â”‚
â””â”€â”€ frontend/                 # Next.js í”„ë¡œì íŠ¸
    â”œâ”€â”€ .env.local            # API_URL ì„¤ì •
    â””â”€â”€ src/
        â”œâ”€â”€ app/
        â”‚   â”œâ”€â”€ page.tsx
        â”‚   â””â”€â”€ about-us/page.tsx
        â”œâ”€â”€ lib/
        â”‚   â””â”€â”€ api-client.ts
        â”œâ”€â”€ styles/
        â”‚   â”œâ”€â”€ legacy/       # ì›ë³¸ CSS
        â”‚   â””â”€â”€ legacy-imports.css
        â””â”€â”€ components/
            â”œâ”€â”€ common/
            â””â”€â”€ about-us/
                â”œâ”€â”€ hero-section.tsx
                â””â”€â”€ team-section.tsx
```

---

## 10. CLI ëª…ë ¹ì–´

### 10.1 ì „ì²´ í”„ë¡œì„¸ìŠ¤

```bash
/jikime:smart-rebuild https://example.com --source=./legacy-php
```

### 10.2 ë‹¨ê³„ë³„ ì‹¤í–‰

```bash
# Phase 1: ìº¡ì²˜ (ë§í¬ë§Œ ìˆ˜ì§‘ - ê¸°ë³¸)
/jikime:smart-rebuild capture https://example.com --output=./capture

# Phase 1: ìº¡ì²˜ (ì „ì²´ ë¯¸ë¦¬ ìº¡ì²˜)
/jikime:smart-rebuild capture https://example.com --prefetch --output=./capture

# Phase 1: ìº¡ì²˜ (ë¡œê·¸ì¸ í•„ìš”)
/jikime:smart-rebuild capture https://example.com --login --output=./capture

# Phase 2: ë¶„ì„ & ë§¤í•‘
/jikime:smart-rebuild analyze --source=./legacy-php --capture=./capture

# Phase 3: í”„ë¡ íŠ¸ì—”ë“œ ìƒì„± (í˜ì´ì§€ë³„)
/jikime:smart-rebuild generate frontend --page 1
/jikime:smart-rebuild generate frontend --next
/jikime:smart-rebuild generate frontend --status

# Phase 3: ë°±ì—”ë“œ ìƒì„± (í˜ì´ì§€ë³„)
/jikime:smart-rebuild generate backend --common-only
/jikime:smart-rebuild generate backend --page 3 --skip-common

# Phase 3: ì—°ë™ (í˜ì´ì§€ë³„)
/jikime:smart-rebuild generate connect --page 3
```

---

## 11. Troubleshooting

### ìº¡ì²˜ ì‹¤íŒ¨
- Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜ í™•ì¸: `npx playwright install chromium`
- íƒ€ì„ì•„ì›ƒ ì¡°ì •: `--timeout=60000`

### ë¡œê·¸ì¸ í•„ìš” ì‚¬ì´íŠ¸
- `--login` ì˜µì…˜ ì‚¬ìš©
- ë¸Œë¼ìš°ì €ì—ì„œ ë¡œê·¸ì¸ ì™„ë£Œ í›„ Enter

### HITL ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì•ˆ ë¨
- SCRIPTS_DIR ê²½ë¡œ í™•ì¸
- npm install ì‹¤í–‰ ì—¬ë¶€ í™•ì¸

### CORS ì˜¤ë¥˜
```
Access to fetch at 'http://localhost:8080/api/...' has been blocked by CORS policy
```
**í•´ê²°:** Spring Bootì˜ `CorsConfig.java` í™•ì¸, `allowedOrigins`ì— `http://localhost:3000` ì¶”ê°€

### API ì—°ê²° ì‹¤íŒ¨
```
Error: fetch failed / ECONNREFUSED
```
**í•´ê²°:**
- ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ ì—¬ë¶€ í™•ì¸: `./gradlew bootRun`
- `.env.local`ì˜ `NEXT_PUBLIC_API_URL` í™•ì¸

### DB ì—°ê²° ì˜¤ë¥˜
```
Cannot acquire connection from data source
```
**í•´ê²°:** `application.yml`ì˜ DB ì„¤ì • í™•ì¸, DB ì„œë²„ ì‹¤í–‰ ì—¬ë¶€ í™•ì¸

---

## 12. ê¸°ì¡´ F.R.I.D.A.Y.ì™€ì˜ ê´€ê³„

| í•­ëª© | F.R.I.D.A.Y. | Smart Rebuild |
|------|-------------|---------------|
| **ì ‘ê·¼ ë°©ì‹** | ì½”ë“œ ë³€í™˜ | ìƒˆë¡œ êµ¬ì¶• |
| **UI ì²˜ë¦¬** | ì½”ë“œ ë¶„ì„ â†’ ë³€í™˜ | ìŠ¤í¬ë¦°ìƒ· â†’ ìƒˆë¡œ ìƒì„± |
| **ë¡œì§ ì²˜ë¦¬** | ì½”ë“œ ë³€í™˜ | ì†ŒìŠ¤ ì°¸ê³  â†’ ìƒˆë¡œ ìƒì„± |
| **ì í•©í•œ ê²½ìš°** | êµ¬ì¡°í™”ëœ ë ˆê±°ì‹œ ì½”ë“œ | ë¹Œë”/ìŠ¤íŒŒê²Œí‹° ì½”ë“œ |
| **ê²°ê³¼ë¬¼** | ë³€í™˜ëœ ì½”ë“œ | í´ë¦° ì½”ë“œ |

**ë‘ ë°©ì‹ì€ ìƒí˜¸ ë³´ì™„ì ì´ë©°, ìƒí™©ì— ë”°ë¼ ì„ íƒí•˜ì—¬ ì‚¬ìš©**

---

## 13. ì°¸ê³  ë¬¸ì„œ

- `templates/.claude/commands/jikime/smart-rebuild.md` - ëª…ë ¹ì–´ ì •ì˜
- `templates/.claude/rules/jikime/smart-rebuild-execution.md` - ìƒì„¸ ì‹¤í–‰ ì ˆì°¨
- `templates/.claude/rules/jikime/smart-rebuild-reference.md` - ì˜µì…˜ ë° ì°¸ì¡°

---

**ì‘ì„±ì¼:** 2026-02-06
**ë²„ì „:** 2.0.0
