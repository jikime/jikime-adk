# Smart Rebuild Execution Guide

ìƒì„¸ ì‹¤í–‰ ì ˆì°¨, ì½”ë“œ ì˜ˆì‹œ, ì›Œí¬í”Œë¡œìš° ê°€ì´ë“œ.

**ê´€ë ¨ ë¬¸ì„œ (ë¶„ë¦¬ë¨):**
- `smart-rebuild-execution-capture.md` - Phase 1: Capture ìƒì„¸
- `smart-rebuild-execution-analyze.md` - Phase 2: Analyze ìƒì„¸
- `smart-rebuild-execution-backend.md` - Phase G: Backend ìƒì„¸

---

## ğŸš¨ğŸš¨ğŸš¨ UI ìƒì„± í•µì‹¬ ì›ì¹™ (CRITICAL!) ğŸš¨ğŸš¨ğŸš¨

**ClaudeëŠ” ë°˜ë“œì‹œ HTML + ìŠ¤í¬ë¦°ìƒ·ì„ ë³´ê³  ì›ë³¸ê³¼ ë™ì¼í•œ UIë¥¼ ì¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤!**

### ğŸ”´ HARD RULES

| # | ê·œì¹™ | ì„¤ëª… |
|---|------|------|
| 1 | **ìŠ¤í¬ë¦°ìƒ· í•„ìˆ˜ ë¶„ì„** | ì½”ë“œ ì‘ì„± ì „ ë°˜ë“œì‹œ ìŠ¤í¬ë¦°ìƒ·ì„ Readí•˜ê³  ì‹œê°ì ìœ¼ë¡œ ë¶„ì„ |
| 2 | **HTML êµ¬ì¡° ë³µì‚¬** | `<header>`, `<nav>`, `<main>`, `<footer>` êµ¬ì¡° ê·¸ëŒ€ë¡œ ìœ ì§€ |
| 3 | **ì›ë³¸ í…ìŠ¤íŠ¸ ìœ ì§€** | HTMLì—ì„œ ì¶”ì¶œí•œ í…ìŠ¤íŠ¸ë¥¼ ë²ˆì—­ ì—†ì´ ì›ë³¸ ê·¸ëŒ€ë¡œ ì‚¬ìš© |
| 4 | **ì›ë³¸ ì´ë¯¸ì§€ URL** | HTMLì˜ `<img src="...">` URLì„ ê·¸ëŒ€ë¡œ ì‚¬ìš© |
| 5 | **ì›ë³¸ CSS Fetch** | ì›ë³¸ ì‚¬ì´íŠ¸ì˜ CSSë¥¼ WebFetchë¡œ ê°€ì ¸ì™€ `src/styles/`ì— ì €ì¥ |
| 6 | **ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬** | ì„¹ì…˜ë³„ë¡œ `components/{route}/*-section.tsx` íŒŒì¼ ìƒì„± |
| 7 | **ì„¹ì…˜ ì‹ë³„ì í•„ìˆ˜** | ëª¨ë“  ì£¼ìš” ì„¹ì…˜ì— `data-section-id` ì†ì„± ì¶”ê°€ (HITL ë¹„êµìš©) |
| 8 | **ìŠ¤í¬ë¦°ìƒ· ê¸°ë°˜ ìŠ¤íƒ€ì¼** | ìƒ‰ìƒ, í°íŠ¸ í¬ê¸°, ê°„ê²©ì€ ìŠ¤í¬ë¦°ìƒ·ì—ì„œ ì¶”ì¶œ |
| 9 | **kebab-case ë„¤ì´ë°** | í´ë”/íŒŒì¼ëª…ì€ ë°˜ë“œì‹œ kebab-case (`about-us/`, `hero-section.tsx`) |

### âŒ ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ

- âŒ ìŠ¤í¬ë¦°ìƒ· ì•ˆ ë³´ê³  ê¸°ë³¸ í…œí”Œë¦¿ìœ¼ë¡œ ëŒ€ì¶© ë§Œë“¤ê¸°
- âŒ HTML ë‚´ìš© ë²ˆì—­í•˜ê¸° (ì˜ì–´â†’í•œê¸€, í•œê¸€â†’ì˜ì–´)
- âŒ í…ìŠ¤íŠ¸ë‚˜ ì´ë¯¸ì§€ ë‚´ìš© ìƒìƒí•´ì„œ ì°½ì‘í•˜ê¸°
- âŒ ì›ë³¸ê³¼ ë‹¤ë¥¸ ë ˆì´ì•„ì›ƒì´ë‚˜ ìƒ‰ìƒ ì‚¬ìš©í•˜ê¸°
- âŒ PascalCase í´ë”ëª… ì‚¬ìš© (`AboutUs/` âŒ â†’ `about-us/` âœ…)
- âŒ ì„¹ì…˜ì— `data-section-id` ë¹¼ë¨¹ê¸° (HITL ë¹„êµ ë¶ˆê°€!)

### âœ… ë°˜ë“œì‹œ í•´ì•¼ í•  ê²ƒ

```
1. Read: {capture}/sitemap.json         # í˜ì´ì§€ ì •ë³´ í™•ì¸
2. Read: {capture}/{screenshot_file}    # ğŸ”´ ìŠ¤í¬ë¦°ìƒ· ì‹œê° ë¶„ì„ (ë ˆì´ì•„ì›ƒ, ìƒ‰ìƒ, ê°„ê²©)
3. Read: {capture}/{html_file}          # ğŸ”´ HTMLì—ì„œ í…ìŠ¤íŠ¸, ì´ë¯¸ì§€ URL ì¶”ì¶œ
4. Write: ì½”ë“œ ì‘ì„±                      # ğŸ”´ ì›ë³¸ê³¼ ë™ì¼í•˜ê²Œ!
```

---

## Core Philosophy

| ê³„ì¸µ | ì „ëµ | ì´ìœ  |
|------|------|------|
| **UI** | ìŠ¤í¬ë¦°ìƒ· â†’ ìƒˆë¡œ ìƒì„± | ë ˆê±°ì‹œ í”„ë¡ íŠ¸ ì½”ë“œ ë¶„ì„ ê°€ì¹˜ ë‚®ìŒ |
| **API** | ì†ŒìŠ¤ ì°¸ê³  â†’ í´ë¦° ì½”ë“œ | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ì¶”ì¶œ |
| **DB** | ìœ ì§€ + ì ì§„ì  ê°œì„  | ë°ì´í„° ì†ì‹¤ Zero |

## 2-Track Strategy

### Track 1: Static Content (ì •ì  ì½˜í…ì¸ )
```
ë¼ì´ë¸Œ ì‚¬ì´íŠ¸ â†’ Playwright ìŠ¤í¬ë˜í•‘ â†’ Next.js ì •ì  í˜ì´ì§€
```
- ì†Œê°œ, About, FAQ, ì´ìš©ì•½ê´€ ë“±
- DB ì—°ë™ ì—†ìŒ, ì½˜í…ì¸ ë§Œ ì´ë™

### Track 2: Dynamic Content (ë™ì  ì½˜í…ì¸ )
```
ì†ŒìŠ¤ ë¶„ì„ â†’ SQL ì¶”ì¶œ â†’ Backend API â†’ Next.js ë™ì  í˜ì´ì§€
```
- íšŒì› ëª©ë¡, ê²°ì œ ë‚´ì—­, ê²Œì‹œíŒ ë“±
- DB ì—°ë™ í•„ìˆ˜, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆìŒ

---

## Phase 1: Capture (ë§í¬ ìˆ˜ì§‘)

> ğŸ“„ **ìƒì„¸ ë¬¸ì„œ:** `smart-rebuild-execution-capture.md`

**ëª©í‘œ:** Playwrightë¡œ ë¼ì´ë¸Œ ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ë§í¬ë¥¼ ìˆ˜ì§‘í•˜ì—¬ sitemap.json ìƒì„±

> **ğŸ”´ Lazy Capture ë°©ì‹**: capture ë‹¨ê³„ì—ì„œëŠ” **ë§í¬ë§Œ ìˆ˜ì§‘**í•©ë‹ˆë‹¤.
> ì‹¤ì œ HTML + ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ëŠ” `generate --page N` ë‹¨ê³„ì—ì„œ í•´ë‹¹ í˜ì´ì§€ ì²˜ë¦¬ ì‹œ ìˆ˜í–‰ë©ë‹ˆë‹¤.

---

## Phase 2: Analyze (ë¶„ì„ & ë§¤í•‘)

> ğŸ“„ **ìƒì„¸ ë¬¸ì„œ:** `smart-rebuild-execution-analyze.md`

**ëª©í‘œ:** ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„í•˜ì—¬ ìº¡ì²˜ì™€ ë§¤í•‘, ì •ì /ë™ì  ë¶„ë¥˜, **API ì˜ì¡´ì„± ì¶”ì¶œ**

**ì¶œë ¥ íŒŒì¼:**
- `{output}/mapping.json` - ì†ŒìŠ¤ â†” ìº¡ì²˜ ë§¤í•‘
- `{output}/api-mapping.json` - API ì˜ì¡´ì„± ë§¤í•‘

---

## Phase 3: Generate Frontend - ì „ì²´ ì›Œí¬í”Œë¡œìš°

**CRITICAL:** Claude Codeê°€ ì§ì ‘ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase A: í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (ì²« í˜ì´ì§€ë§Œ)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase B: í˜ì´ì§€ ê¸°ë³¸ ì½”ë“œ ìƒì„± (ğŸ”´ HTML + ìŠ¤í¬ë¦°ìƒ· í•„ìˆ˜!)                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  1. Read: sitemap.json                                                       â”‚
â”‚  2. Read: {screenshot} â†’ ğŸ”´ ë ˆì´ì•„ì›ƒ, ìƒ‰ìƒ, ê°„ê²© ì‹œê° ë¶„ì„                    â”‚
â”‚  3. Read: {html} â†’ ğŸ”´ í…ìŠ¤íŠ¸, ì´ë¯¸ì§€ URL ì¶”ì¶œ (ë²ˆì—­ ê¸ˆì§€!)                    â”‚
â”‚  4. Write: ì „ì²´ í˜ì´ì§€ ì½”ë“œ (ğŸ”´ ì›ë³¸ê³¼ ë™ì¼í•˜ê²Œ!)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase C: ê°œë°œ ì„œë²„ ì‹¤í–‰                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase D: AskUserQuestion                                                     â”‚
â”‚  "í˜ì´ì§€ {N} ê¸°ë³¸ ì½”ë“œ ì™„ë£Œ. ë‹¤ìŒ ì‘ì—…ì€?"                                     â”‚
â”‚  options: [HITL ì„¸ë¶€ ì¡°ì •, ë‹¤ìŒ í˜ì´ì§€, ì§ì ‘ ì…ë ¥]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                 â–¼                 â–¼
            [HITL ì„¸ë¶€ ì¡°ì •]    [ë‹¤ìŒ í˜ì´ì§€]     [ì§ì ‘ ì…ë ¥]
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase E: HITL ë£¨í”„ (ğŸ”´ ëª¨ë“  ì„¹ì…˜ ì™„ë£Œê¹Œì§€ ë°˜ë³µ!)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase F: í˜ì´ì§€ ì™„ë£Œ & ë‹¤ìŒ í˜ì´ì§€                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Phase A: í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (ì²« í˜ì´ì§€ë§Œ)

**ì¡°ê±´**: `{output}/frontend/package.json`ì´ ì—†ìœ¼ë©´ ì‹¤í–‰

```bash
# Next.js í”„ë¡œì íŠ¸ ìƒì„±
npx create-next-app@latest {output}/frontend \
  --typescript --tailwind --eslint --app --src-dir --import-alias "@/*" --use-npm

# shadcn/ui ì´ˆê¸°í™”
cd {output}/frontend && npx shadcn@latest init --defaults
cd {output}/frontend && npx shadcn@latest add button card input dialog table tabs alert badge form label textarea select

# ì›ë³¸ CSS ì €ì¥ í´ë” ìƒì„±
mkdir -p {output}/frontend/src/styles/legacy
```

---

## Phase B: í˜ì´ì§€ ê¸°ë³¸ ì½”ë“œ ìƒì„± (ğŸ”´ CRITICAL!)

### Step 0: í˜ì´ì§€ ìº¡ì²˜ í™•ì¸ (ğŸ”´ Lazy Capture!)

> **generate ì‹œì ì— í•´ë‹¹ í˜ì´ì§€ë¥¼ ìº¡ì²˜í•©ë‹ˆë‹¤.**

```
Read: {capture}/sitemap.json
      â†“
IF page.captured === false:
  â†’ í•´ë‹¹ í˜ì´ì§€ HTML + ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ ì‹¤í–‰
  â†’ sitemap.json ì—…ë°ì´íŠ¸ (captured: true)
ELSE:
  â†’ Step 1ë¡œ ì§„í–‰
```

### Step 1-3: íŒŒì¼ ì½ê¸°

```
1. Read: {capture}/sitemap.json       # í˜ì´ì§€ ì •ë³´
2. Read: {capture}/{page.screenshot}  # ğŸ”´ ì‹œê° ë¶„ì„ í•„ìˆ˜!
3. Read: {capture}/{page.html}        # ğŸ”´ í…ìŠ¤íŠ¸/ì´ë¯¸ì§€ ì¶”ì¶œ
```

### ğŸ”´ Step 3.3: ì„¹ì…˜ ê°ì§€ & sitemap.json ì—…ë°ì´íŠ¸ (HITL í•„ìˆ˜!)

**HTMLì—ì„œ ì‹œë§¨í‹± ì„¹ì…˜ ìë™ ê°ì§€:**

```
1. HTML ë¶„ì„ â†’ ì‹œë§¨í‹± ì„¹ì…˜ ê°ì§€ (header, nav, main, footer ë“±)
2. ê° ì„¹ì…˜ì— ID ë¶€ì—¬ (01, 02, 03...)
3. sitemap.jsonì˜ í•´ë‹¹ í˜ì´ì§€ì— sections ë°°ì—´ ì €ì¥
4. HITL ë¹„êµ ì‹œ ì´ ì •ë³´ë¥¼ ì‚¬ìš©!
```

**ì„¹ì…˜ ê°ì§€ ìš°ì„ ìˆœìœ„:**

| ìš°ì„ ìˆœìœ„ | ì›ë³¸ HTML ì…€ë ‰í„° | ì„¹ì…˜ ID | ì„¹ì…˜ ì´ë¦„ |
|---------|-----------------|---------|----------|
| 1 | `header`, `#header`, `.header`, `[role="banner"]` | `01` | `header` |
| 2 | `nav`, `#nav`, `.gnb`, `[role="navigation"]` | `02` | `nav` |
| 3 | `.hero`, `.visual`, `.banner`, `.main-visual` | `03` | `hero` |
| 4 | `main`, `#main`, `.content`, `[role="main"]` | `04` | `main` |
| 5 | `section`, `.section` | `05+` | `section-N` |
| 6 | `aside`, `.sidebar`, `[role="complementary"]` | `..` | `sidebar` |
| 7 | `footer`, `#footer`, `[role="contentinfo"]` | `..` | `footer` |

**sitemap.json ì—…ë°ì´íŠ¸ ì˜ˆì‹œ:**

```json
{
  "pages": [{
    "id": 1,
    "url": "https://example.com/",
    "sections": [
      { "id": "01", "name": "header", "label": "í—¤ë”", "selector": "header" },
      { "id": "02", "name": "nav", "label": "ë‚´ë¹„ê²Œì´ì…˜", "selector": "#gnb" },
      { "id": "03", "name": "hero", "label": "ë©”ì¸ ë¹„ì£¼ì–¼", "selector": ".hero" },
      { "id": "04", "name": "main", "label": "ë©”ì¸ ì½˜í…ì¸ ", "selector": "main" },
      { "id": "05", "name": "footer", "label": "í‘¸í„°", "selector": "footer" }
    ]
  }]
}
```

### Step 3.5: ì›ë³¸ CSS Fetch & ì €ì¥ (ì²« í˜ì´ì§€ë§Œ)

```
1. HTMLì—ì„œ CSS URL ì¶”ì¶œ
2. WebFetchë¡œ ê° CSS íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
3. src/styles/legacy/ í´ë”ì— ì €ì¥
4. legacy-imports.css ìƒì„±
```

### Step 4: React ì½”ë“œ ì‘ì„±

**ğŸ”´ íŒŒì¼/í´ë” ë„¤ì´ë° ê·œì¹™ (HARD RULE!):**

| ëŒ€ìƒ | ê·œì¹™ | âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ | âŒ ì˜ëª»ëœ ì˜ˆì‹œ |
|------|------|---------------|---------------|
| **ë¼ìš°íŠ¸ í´ë”** | kebab-case | `about-us/` | `aboutUs/` |
| **í˜ì´ì§€ íŒŒì¼** | page.tsx (ê³ ì •) | `about-us/page.tsx` | `AboutUs.tsx` |
| **ì»´í¬ë„ŒíŠ¸ íŒŒì¼** | kebab-case | `hero-section.tsx` | `HeroSection.tsx` |

### ğŸ”´ ì„¹ì…˜ ì‹ë³„ì ê·œì¹™ (HITL ë¹„êµìš© - í•„ìˆ˜!)

**Step 3.3ì—ì„œ ê°ì§€í•œ ì„¹ì…˜ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ React ì»´í¬ë„ŒíŠ¸ì— `data-section-id` ì¶”ê°€:**

| sitemap.jsonì˜ section | React ì»´í¬ë„ŒíŠ¸ |
|------------------------|----------------|
| `{ "id": "01", "name": "header" }` | `<header data-section-id="01-header">` |
| `{ "id": "02", "name": "nav" }` | `<nav data-section-id="02-nav">` |
| `{ "id": "03", "name": "hero" }` | `<section data-section-id="03-hero">` |
| `{ "id": "04", "name": "main" }` | `<main data-section-id="04-main">` |
| `{ "id": "05", "name": "footer" }` | `<footer data-section-id="05-footer">` |

> **CRITICAL:** `data-section-id`ì˜ í˜•ì‹ì€ ë°˜ë“œì‹œ `{id}-{name}`ì´ì–´ì•¼ í•¨!
> HITLì—ì„œ `[data-section-id="01-header"]` ì…€ë ‰í„°ë¡œ ë¡œì»¬ ìš”ì†Œë¥¼ ì°¾ìŒ!

**ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ:**

```tsx
// components/home/header-section.tsx
export function HeaderSection() {
  return (
    <header data-section-id="01-header">  {/* ğŸ”´ í•„ìˆ˜! sitemap.jsonê³¼ ì¼ì¹˜ */}
      <nav>...</nav>
      <div className="logo">...</div>
    </header>
  );
}

// components/home/hero-section.tsx
export function HeroSection() {
  return (
    <section data-section-id="03-hero">  {/* ğŸ”´ í•„ìˆ˜! */}
      <h1>Welcome</h1>
      <p>...</p>
    </section>
  );
}
```

### ğŸ”´ ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ ê·œì¹™

```
src/
â”œâ”€â”€ app/{route}/page.tsx              # ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ ì¡°í•©
â””â”€â”€ components/{route}/               # ğŸ”´ kebab-case!
    â”œâ”€â”€ hero-section.tsx              # data-section-id í¬í•¨
    â””â”€â”€ features-section.tsx
```

**page.tsx í…œí”Œë¦¿:**
```tsx
import { HeroSection } from '@/components/{route}/hero-section';
import { FeaturesSection } from '@/components/{route}/features-section';

export default function PageName() {
  return (
    <div>
      <HeroSection />
      <FeaturesSection />
    </div>
  );
}
```

---

## Phase C: ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
cd {output}/frontend && npm run dev &
sleep 3  # ì„œë²„ ì‹œì‘ ëŒ€ê¸°
# ğŸ”´ ê¸°ë³¸ í¬íŠ¸: 3893 (http://localhost:3893)
```

---

## Phase D: AskUserQuestion

```
AskUserQuestion:
  question: "í˜ì´ì§€ {N} ê¸°ë³¸ ì½”ë“œ ìƒì„± ì™„ë£Œ. ë‹¤ìŒ ì‘ì—…ì€?"
  header: "í˜ì´ì§€ ì™„ë£Œ"
  options:
    - label: "HITL ì„¸ë¶€ ì¡°ì •"
    - label: "ë‹¤ìŒ í˜ì´ì§€"
    - label: "ì§ì ‘ ì…ë ¥"
```

---

## Phase E: HITL ë£¨í”„ (ğŸ”´ í•µì‹¬ ì›Œí¬í”Œë¡œìš°!)

### ğŸš¨ğŸš¨ğŸš¨ HITL HARD RULES (ì ˆëŒ€ ìœ„ë°˜ ê¸ˆì§€!) ğŸš¨ğŸš¨ğŸš¨

| # | ê·œì¹™ | ì„¤ëª… |
|---|------|------|
| 1 | **ğŸ”´ í˜¼ì ê²°ì • ê¸ˆì§€** | ClaudeëŠ” ì ˆëŒ€ í˜¼ìì„œ ìŠ¹ì¸/ìŠ¤í‚µ ê²°ì •í•˜ë©´ ì•ˆ ë¨! |
| 2 | **ğŸ”´ AskUserQuestion í•„ìˆ˜** | ëª¨ë“  ì„¹ì…˜ ë¹„êµ í›„ ë°˜ë“œì‹œ ì‚¬ìš©ìì—ê²Œ ë¬¼ì–´ë´ì•¼ í•¨! |
| 3 | **ğŸ”´ ì‚¬ìš©ì ì‘ë‹µ ëŒ€ê¸°** | ì‚¬ìš©ìê°€ ì„ íƒí•  ë•Œê¹Œì§€ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ ê¸ˆì§€! |
| 4 | **ğŸ”´ ìë™ skip ê¸ˆì§€** | ì¼ì¹˜ìœ¨ì´ ë†’ì•„ë„ ì‚¬ìš©ì í™•ì¸ ì—†ì´ skip ê¸ˆì§€! |
| 5 | **ğŸ”´ ìë™ approve ê¸ˆì§€** | ì¼ì¹˜ìœ¨ 100%ì—¬ë„ ì‚¬ìš©ì í™•ì¸ í•„ìˆ˜! |

> **ì™œ ì¤‘ìš”í•œê°€?** HITLì€ Human-in-the-Loopì˜ ì•½ìì…ë‹ˆë‹¤. ì‚¬ëŒ(Human)ì´ ë£¨í”„ ì•ˆì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤!
> Claudeê°€ í˜¼ì ê²°ì •í•˜ë©´ HITLì´ ì•„ë‹ˆë¼ ê·¸ëƒ¥ ìë™í™”ì…ë‹ˆë‹¤.

### ğŸ”´ ì„¹ì…˜ ë¹„êµ ì…€ë ‰í„° ê·œì¹™

| ëŒ€ìƒ | ì…€ë ‰í„° ë°©ì‹ | ì˜ˆì‹œ |
|------|------------|------|
| **ì›ë³¸ í˜ì´ì§€** | ì‹œë§¨í‹± ì…€ë ‰í„° | `header`, `.hero`, `#nav` |
| **ë¡œì»¬ í˜ì´ì§€** | data-section-id | `[data-section-id="01-header"]` |

> **ì´ìœ :** ì›ë³¸ê³¼ ë¡œì»¬ì˜ HTML êµ¬ì¡°ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë¡œì»¬ì€ ìƒì„± ì‹œ ì¶”ê°€í•œ `data-section-id`ë¡œ ë§¤ì¹­í•©ë‹ˆë‹¤.

### E-1: hitl-refine.ts ì‹¤í–‰ (ğŸ”´ Bash í•„ìˆ˜!)

```bash
cd "{SCRIPTS_DIR}" && npx ts-node --transpile-only \
  generate/hitl-refine.ts --capture={capture} --page={pageId}
```

### E-2: JSON ê²°ê³¼ íŒŒì‹±

`<!-- HITL_RESULT_JSON_START -->` ~ `<!-- HITL_RESULT_JSON_END -->` ì‚¬ì´ JSON ì¶”ì¶œ

### E-3: AskUserQuestion

```
AskUserQuestion:
  question: "{sectionName} ì„¹ì…˜ ë¹„êµ ê²°ê³¼: ì¼ì¹˜ìœ¨ {overallMatch}%"
  options: ["ìŠ¹ì¸", "ìˆ˜ì • í•„ìš”", "ìŠ¤í‚µ"]
```

### E-4: ì‘ë‹µë³„ ì²˜ë¦¬

| ì‘ë‹µ | ì²˜ë¦¬ |
|------|------|
| **ìŠ¹ì¸** | â†’ E-5 (ë‹¤ìŒ ì„¹ì…˜ìœ¼ë¡œ) |
| **ìˆ˜ì • í•„ìš”** | â†’ Edit â†’ ğŸ”„ **E-1ë¡œ ëŒì•„ê°€ê¸°** |
| **ìŠ¤í‚µ** | â†’ E-5 (ë‹¤ìŒ ì„¹ì…˜ìœ¼ë¡œ) |

### E-5: ì„¹ì…˜ ì™„ë£Œ ì²´í¬

```
IF ë‚¨ì€ pending ì„¹ì…˜ ìˆìŒ:
  â†’ E-1ë¡œ ëŒì•„ê°€ê¸°
ELSE:
  â†’ Phase F
```

---

## Phase F: í˜ì´ì§€ ì™„ë£Œ & ë‹¤ìŒ í˜ì´ì§€

### F-1: sitemap.json ì—…ë°ì´íŠ¸

```json
{ "id": 1, "status": "completed", "completedAt": "2026-02-05T10:30:00Z" }
```

### F-2: ë‹¤ìŒ í˜ì´ì§€ ì§ˆë¬¸

```
AskUserQuestion:
  question: "í˜ì´ì§€ {N} ì™„ë£Œ! ë‹¤ìŒ í˜ì´ì§€ë¡œ ì§„í–‰í• ê¹Œìš”?"
  options: ["ì˜ˆ", "ì•„ë‹ˆì˜¤"]
```

---

## Phase G: ë°±ì—”ë“œ ì—°ë™

> ğŸ“„ **ìƒì„¸ ë¬¸ì„œ:** `smart-rebuild-execution-backend.md`

**ì¡°ê±´:** ë™ì  í˜ì´ì§€ì—ì„œ "ë°±ì—”ë“œ ì—°ë™" ì„ íƒ ì‹œ

**ì›Œí¬í”Œë¡œìš°:**
```
G-0: ë°±ì—”ë“œ í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (ì²« ë™ì  í˜ì´ì§€ì—ì„œ 1íšŒ)
     â†“
G-1: ê³µí†µ API ìƒì„± (ì¸ì¦ ë“±)
     â†“
G-2: í˜ì´ì§€ ì „ìš© API ìƒì„±
     â†“
G-3: Frontend Connect (Mock â†’ Real API)
     â†“
G-4: í†µí•© í…ŒìŠ¤íŠ¸
     â†“
G-5: ì—°ë™ ì™„ë£Œ
```

---

## CLI ëª…ë ¹ì–´ ì°¸ì¡°

### Capture
```bash
cd "{SCRIPTS_DIR}" && npx ts-node --transpile-only bin/smart-rebuild.ts capture {url} \
  --output={output} [--login] [--max-pages=100]
```

### Analyze
```bash
cd "{SCRIPTS_DIR}" && npx ts-node --transpile-only bin/smart-rebuild.ts analyze \
  --source={source} --capture={capture} --output={output}
```

### HITL
```bash
cd "{SCRIPTS_DIR}" && npx ts-node --transpile-only generate/hitl-refine.ts \
  --capture={capture} --page={pageId}
```

---

## Output Structure

```
{output}/
â”œâ”€â”€ capture/
â”‚   â”œâ”€â”€ sitemap.json
â”‚   â”œâ”€â”€ *.png / *.html
â”‚   â””â”€â”€ hitl/page_{N}/
â”‚
â”œâ”€â”€ mapping.json
â”œâ”€â”€ api-mapping.json
â”‚
â”œâ”€â”€ backend/                  # Phase G
â”‚
â””â”€â”€ frontend/
    â””â”€â”€ src/
        â”œâ”€â”€ app/{routes}/page.tsx
        â”œâ”€â”€ styles/legacy/
        â””â”€â”€ components/{routes}/*-section.tsx
```

---

Version: 2.0.0
